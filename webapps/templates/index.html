<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicon-16x16.png">
    <link rel="manifest" href="/static/images/site.webmanifest">
    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>ChatGPT 예제</title>
    <script src="/static/js/rag.js"></script>
    <link rel="stylesheet" href="/static/css/rag.css">
    <script>
        const user_image        = `<img src="/static/images/user.png" alt="User Avatar">`;
        const brainwise_image         = `<img src="/static/images/brainwise.png" alt="brainwise Avatar">`;
    </script>
</head>
<body>
<div class="row">
    <form name="bws_form" id="resultForm" method="POST" accept-charset="UTF-8">
        <input type="hidden" name="cname" value="bwdocs" />
        <input type="hidden" name="keycode" value="8e8aa899d03dc37653a99d887f6e22daf14ec163159d1e6e1ae9c9f0b1e22e1a" />
        <input type="hidden" name="cmd" value="select" />
        <input type="hidden" name="person" value="admin" />
        <input type="hidden" name="attach" value="true" />
        <input type="hidden" name="bw_QF" value="title,content">
        <input type="hidden" name="bw_FF" value="title,img_file,owner_file,content,score" />
        <input type="hidden" id="sort_input" name="bw_FS0" value="score desc" />
        <input type="hidden" id="contentbw_QK" name="bw_QK"  value="" />

        <input type="hidden" id="bw_BA" name="bw_BA" value="true" />
        <input type="hidden" name="bw_BF" value="section" />
        <input type="hidden" name="bw_BC" value="true" />
        <input type="hidden" name="bw_BL" value="3" />
        <input type="hidden" name="bw_BN" value="true" />
    </form>
    <div class="conversation disable-scrollbars">
        <div class="stop_generating stop_generating-hidden">
            <button id="cancelButton">
                <span>Stop Generating</span>
                <i class="fa-regular fa-stop"></i>
            </button>
        </div>
        <div class="box" id="messages">
        </div>
        <div class="user-input">
            <div class="box input-box">
                <textarea id="message-input" placeholder="Ask a question" cols="30" rows="10" style="white-space: pre-wrap;" oninput="resizeTextarea(this)"></textarea>
                <button id="send-button" onclick="askGenAI()">
                    입력
                </button>
            </div>
        </div>
        <div class="buttons">
        </div>
    </div>
    <div class="box conversations">
        <div class="top">
            <span>검색결과</span>
            <div class="spinner">
            </div>
        </div>
    </div>
</div>
</body>
</html>
<script>
    $(document).ready(function() {
        const sendText = document.getElementById('message-input');

        sendText.addEventListener('keydown', function (event) {
            // 엔터키가 눌렸지만 쉬프트키는 눌리지 않았을 때
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault(); // 기본 엔터키 동작(줄바꿈) 방지
                askGenAI(); // 검색 버튼 클릭 실행
            }
            // 쉬프트+엔터의 경우 기본 동작(줄바꿈) 실행됨


        });
    })
</script>
